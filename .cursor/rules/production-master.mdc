---
description: Production Master â€” slash commands and investigation pipeline (follow commands/production-master.md and agents when user invokes /production-master or related commands)
alwaysApply: true
---

# Production Master (Cursor)

When the user invokes **slash commands** for production investigation, follow the workflows in this repo.

## Slash commands

| User says | Action |
|-----------|--------|
| `/production-master <TICKET or args>` | Full pipeline: follow **commands/production-master.md** from start to finish. |
| `/grafana-query <args>` | Standalone Grafana: follow **commands/grafana-query.md**. |
| `/slack-search <args>` | Standalone Slack: follow **commands/slack-search.md**. |
| `/production-changes <args>` | PRs/commits/toggles: follow **commands/production-changes.md**. |
| `/resolve-artifact <args>` | Validate artifacts: follow **commands/resolve-artifact.md**. |
| `/fire-console <args>` | Fire Console gRPC: follow **commands/fire-console.md**. |
| `/update-context` | Domain config: follow **commands/update-context.md**. |
| `/git-update-agents` | Sync agents to repo: follow **commands/git-update-agents.md**. |

## Running the main pipeline (/production-master)

1. **Read** `commands/production-master.md` and execute its steps in order.
2. **No Task tool:** Cursor has no subagent Task. Whenever the orchestrator says "Launch Task with agent X" or "Launch one Task (model: sonnet)" for an agent:
   - **Read** the corresponding file under `agents/<agent-name>.md` (e.g. `agents/bug-context.md`).
   - **Execute** that agent's instructions yourself in this turn: same agent, same context.
   - **Write** the output to the path the orchestrator specifies (e.g. under `debug/debug-<ticket>-<timestamp>/<agent>/<agent>-output-V1.md`).
3. **Domain config:** Load from `~/.claude/production-master/domains/<repo-name>/domain.json` (or `.claude/domain.json` / `~/.claude/domain.json`). Repo name from `git remote get-url origin` (strip path and `.git`).
4. **MCP tools:** Use the MCP skill docs under `.cursor/skills/` (e.g. `grafana-datasource`, `fire-console`) for exact tool names and parameters when the orchestrator or command says to use an MCP.
5. **Parallel steps:** The orchestrator may say "Launch FOUR Tasks in the SAME message". Run those four agent steps **sequentially** (production-analyzer, then slack-analyzer, then codebase PRs, then Fire Console), each by reading the right `agents/*.md` and writing the specified output file.
6. **Output directory:** Create `debug/debug-<TICKET>-<date>-<time>/` (or `.claude/debug/...` if inside a repo that uses `.claude/debug`) and put all agent outputs there. Update `findings-summary.md` after each step as the orchestrator specifies.

## Skills (MCP)

For Grafana, Fire Console, Slack, Jira, GitHub, Octocode, FT-release, Context7, and Grafana-MCP, use the skill docs in `.cursor/skills/<name>/SKILL.md` for tool names, parameters, and workflows. Pass relevant skill content into context when the command or agent says to use that MCP.
